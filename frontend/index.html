<!DOCTYPE html>
<html lang="ta">
<head>
  <meta charset="UTF-8" />
  <title>Playlist Generator</title>
  <link rel="stylesheet" href="styles.css">
  
</head>
<body>
  <h1>Pick your mood ğŸ§</h1>
 <div class="wrapper">

     <div class="emoji">
   
         <!-- Mood Emojis -->
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜Š')">ğŸ˜Š</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜­')">ğŸ˜­</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜')">ğŸ˜</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜')">ğŸ˜</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ’”')">ğŸ’”</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ•º')">ğŸ•º</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ¤©')">ğŸ¤©</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜´')">ğŸ˜´</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ¤¯')">ğŸ¤¯</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ¥³')">ğŸ¥³</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜¡')">ğŸ˜¡</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜‡')">ğŸ˜‡</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜œ')">ğŸ˜œ</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ¤—')">ğŸ¤—</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜¢')">ğŸ˜¢</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ¤¤')">ğŸ¤¤</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ™ƒ')">ğŸ™ƒ</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜¤')">ğŸ˜¤</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜Œ')">ğŸ˜Œ</button>
         <button class="emoji-button" onclick="generatePlaylist('ğŸ˜‹')">ğŸ˜‹</button>
        </div>
        <div id="playlistResult"  style="display: none;" class="result"></div>
 </div>



  <script>
      window.onload = () => {
    document.querySelector('.wrapper').classList.add('show');
  };

      async function generatePlaylist(emoji) {
        document.querySelector(".emoji").style.display = "none";
        document.querySelector('.result').style.display='flex';

        try {
          const res = await fetch(`http://localhost:3000/playlist/${encodeURIComponent(emoji)}`);
          const data = await res.json();
      
          const div = document.getElementById("playlistResult");
          if (res.ok) {
            div.innerHTML = `
              <h2>${data.name}</h2>
              <button onclick="window.open('${data.url}', '_blank')">ğŸ§ Open Spotify Playlist</button>
              <button onclick="back()"> Back</button>


              <img src="${data.image}" alt="Mood Image" width="300" />
            `;
          } else {
            div.innerHTML = `<p style="color:red;">${data.message || "à®ªà®¾à®Ÿà®²à¯ à®ªà®Ÿà¯à®Ÿà®¿à®¯à®²à¯ à®•à®¿à®Ÿà¯ˆà®•à¯à®•à®µà®¿à®²à¯à®²à¯ˆ."}</p>`;
          }
        } catch (error) {
          console.error(error);
          document.getElementById("playlistResult").innerHTML = `<p style="color:red;">à®šà¯‡à®µà¯ˆ à®¤à¯‹à®²à¯à®µà®¿à®¯à®Ÿà¯ˆà®¨à¯à®¤à®¤à¯.</p>`;
        }

        
      }
      function back() {
        document.querySelector('.result').style.display='none'
        document.querySelector('.emoji').style.display='block' 
      }
  </script>

</body>
</html>
